{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Order } from 'src/app/shared/models/Order';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/cart.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/user.service\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"src/app/services/order.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"../../partials/title/title.component\";\nimport * as i8 from \"../../partials/text-input/text-input.component\";\nimport * as i9 from \"../../partials/order-items-list/order-items-list.component\";\nimport * as i10 from \"../../partials/map/map.component\";\nlet CheckoutPageComponent = /*#__PURE__*/(() => {\n  class CheckoutPageComponent {\n    constructor(cartService, formBuilder, userService, toastrService, orderService, router) {\n      this.formBuilder = formBuilder;\n      this.userService = userService;\n      this.toastrService = toastrService;\n      this.orderService = orderService;\n      this.router = router;\n      this.order = new Order();\n      const cart = cartService.getCart();\n      this.order.items = cart.items;\n      this.order.totalPrice = cart.totalPrice;\n    }\n    ngOnInit() {\n      let {\n        name,\n        address\n      } = this.userService.currentUser;\n      this.checkoutForm = this.formBuilder.group({\n        name: [name, Validators.required],\n        address: [address, Validators.required]\n      });\n    }\n    get fc() {\n      return this.checkoutForm.controls;\n    }\n    createOrder() {\n      if (this.checkoutForm.invalid) {\n        this.toastrService.warning('Please fill the inputs', 'Invalid Inputs');\n        return;\n      }\n      if (!this.order.addressLatLng) {\n        this.toastrService.warning('Please select your location on the map', 'Location');\n        return;\n      }\n      this.order.name = this.fc.name.value;\n      this.order.address = this.fc.address.value;\n      this.orderService.create(this.order).subscribe({\n        next: () => {\n          this.router.navigateByUrl('/payment');\n        },\n        error: errorResponse => {\n          this.toastrService.error(errorResponse.error, 'Cart');\n        }\n      });\n    }\n    static #_ = this.ɵfac = function CheckoutPageComponent_Factory(t) {\n      return new (t || CheckoutPageComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.OrderService), i0.ɵɵdirectiveInject(i6.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CheckoutPageComponent,\n      selectors: [[\"app-checkout-page\"]],\n      decls: 14,\n      vars: 5,\n      consts: [[1, \"container\"], [1, \"content\"], [\"title\", \"Order Form\", \"fontSize\", \"1.6rem\"], [3, \"formGroup\"], [\"label\", \"Name\", 3, \"control\"], [\"label\", \"Address\", 3, \"control\"], [3, \"order\"], [1, \"map\"], [\"title\", \"Choose Your Address On Map\", \"fontSize\", \"1.6rem\"], [1, \"buttons-container\"], [1, \"buttons\"], [3, \"click\"]],\n      template: function CheckoutPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵelement(2, \"app-title\", 2);\n          i0.ɵɵelementStart(3, \"form\", 3);\n          i0.ɵɵelement(4, \"text-input\", 4)(5, \"text-input\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(6, \"order-items-list\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 7);\n          i0.ɵɵelement(8, \"app-title\", 8)(9, \"map\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 9)(11, \"div\", 10)(12, \"button\", 11);\n          i0.ɵɵlistener(\"click\", function CheckoutPageComponent_Template_button_click_12_listener() {\n            return ctx.createOrder();\n          });\n          i0.ɵɵtext(13, \" Go To Payment \");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.checkoutForm);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"control\", ctx.fc.name);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"control\", ctx.fc.address);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"order\", ctx.order);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"order\", ctx.order);\n        }\n      },\n      dependencies: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i7.TitleComponent, i8.TextInputComponent, i9.OrderItemsListComponent, i10.MapComponent],\n      styles: [\".container[_ngcontent-%COMP%]{margin-top:1rem;display:flex;margin:0 2rem 6rem;flex-wrap:wrap;justify-content:center}.content[_ngcontent-%COMP%]{width:35rem;margin-right:3rem}.content[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]{width:100%}.buttons-container[_ngcontent-%COMP%]{flex-basis:100%;display:flex;justify-content:center}.buttons[_ngcontent-%COMP%]{margin:2rem;width:35rem}button[_ngcontent-%COMP%]{color:#fff;background-color:#e72929;width:100%;height:3rem;opacity:.8;font-size:1.3rem;border:none;border-radius:.5rem;box-shadow:2px 2px 2px 2px gray}button[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer}\"]\n    });\n  }\n  return CheckoutPageComponent;\n})();\nexport { CheckoutPageComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}